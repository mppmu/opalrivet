\documentclass[zpreprint,zbstnp]{zeus_paper}
\usepackage[T1]{fontenc}

\usepackage{helvet}

\usepackage{tikz}
\usepackage[export]{adjustbox}
\usetikzlibrary{external}
\usetikzlibrary{shapes,arrows}
\usetikzlibrary{intersections}
\usetikzlibrary{patterns}
\usetikzlibrary{calc}
\usepackage{pgfplotstable}
\usepackage{tikz-3dplot}
\usepackage{pgfplots}
\tikzexternalize
\makeatletter \newcommand{\pgfplotsdrawaxis}{\pgfplots@draw@axis} \makeatother
\pgfplotsset{axis line on top/.style={
  axis line style=transparent,
  ticklabel style=transparent,
  tick style=transparent,
  axis on top=false,
  after end axis/.append code={
    \pgfplotsset{axis line style=opaque,
      ticklabel style=opaque,
      tick style=opaque,
      grid=none}
    \pgfplotsdrawaxis}
  }
}
\newcommand*{\thismath}{\mathsf}



\newcommand{\diaFINALaverageFF} {
\begin{figure}[!htb]
\begin{center}
\let\oldfamilydefault\familydefault
\renewcommand*{\familydefault}{\sfdefault}
\begin{tikzpicture}
\begin{axis}[width=0.98\textwidth,height=0.7\textwidth,axis line on top,
major grid style={color=red},
axis line style = thick,
xmin=-1.0,xmax=48.0,
ymin=0.0,ymax=0.69,
ylabel={{\bf\Large Charm fragmentation fractions}},
y label style={at={(axis  cs:-4.0,.0)},anchor=west},
xticklabels={$\thismath{D^{*+}}$,$\thismath{D^{*0}}$,$\thismath{D^{*+}_{s}}$,$\thismath{D^+}$,$\thismath{D^0}$,$\thismath{D^{+}_{s}}$,$\thismath{\Lambda_c^{+}}$,$\thismath{S}$,$\thismath{R_{u/d}}$,$\thismath{P^d_{V}}$,$\thismath{\gamma_s}$},
xtick={3.0,10.0,...,80.0},
yticklabels={$\thismath{0}$,$\thismath{0.1}$,$\thismath{0.2}$,$\thismath{0.3}$,$\thismath{0.4}$,$\thismath{0.5}$,$\thismath{0.6}$,$\thismath{1.4}$,$\thismath{1.6}$},
y tick style={color=black,thick},
x tick style={color=white},
xtick align=outside,
ytick={0.0,0.1,...,0.8},
minor ytick={0.0,0.02,...,0.8},
major tick length=10pt,
minor tick length=5pt,
y tick label style={font=\boldmath\Large,/pgf/number format/fixed},
x tick label style={anchor=base,font=\boldmath\Large,yshift=-0.7cm},clip=true,
legend style={draw=none,at={(axis cs:23.5,0.70)},anchor=south,legend columns=2,font=\boldmath\large,draw opacity=0,legend cell align=left,fill=none}
]

\pgfplotstableread[header=true]{Tables/average_plot_free_sigma_constrain.txt}{\datawhead}
\pgfplotstableread[header=false]{Tables/average_plot_free_sigma_constrain.txt}{\data}
\foreach \j in {0,...,6}
{
\pgfplotstablegetelem{\j}{[index]1}\of\datawhead
\pgfmathsetmacro{\xap}{7.0*\pgfplotsretval+1.0+5.0}
\pgfplotstablegetelem{\j}{[index]1}\of\datawhead
\pgfmathsetmacro{\xam}{7.0*\pgfplotsretval-6.0+5.0}
\pgfplotstablegetelem{\j}{[index]2}\of\datawhead
\pgfmathsetmacro{\ya}{\pgfplotsretval}
\pgfplotstablegetelem{\j}{[index]4}\of\datawhead
\pgfmathsetmacro{\yaerr}{\pgfplotsretval}
\pgfmathsetmacro{\yap}{\ya+\yaerr}
\pgfmathsetmacro{\yam}{\ya-\yaerr}
\edef\temp{\noexpand\fill[gray!40!white] (axis cs:\xap,\yap) rectangle (axis cs:\xam,\yam);}
\temp
}

\legend{}
\addlegendimage{gray,fill=gray,mark=pentagon*,mark size=3.4pt,area legend}
\addplot+[forget plot, only marks, color=gray, mark color=gray,  mark options={fill=gray,draw=gray,scale=1.0},                              mark=pentagon*, mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=7*\thisrow{x}+5,y=y,x error= errorx,y error=errory]{Tables/average_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{\bf Combination }

%\addlegendimage{\draw[fill = black!10] (0cm, -0.1cm) rectangle (0.6cm, 0.1cm)}

\addplot+[only marks,   color=red, mark color=red, mark options={fill=red,draw=red,scale=1.0},                                mark=*,          mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=7*\thisrow{x}+0,y=y,x error= errorx,y error=errory]{Tables/ee10_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath B$-factories}}

\addplot+[only marks, color=pink, mark color=pink, mark options={fill=pink,draw=pink,scale=1.0},                              mark=square*,mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=7*\thisrow{x}+1,y=y,x error= errorx,y error=errory]{Tables/eez0_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{  Z}$ decays}}

\addplot+[only marks, color=blue, mark color=blue, mark options={fill=blue,draw=blue,scale=1.0},                               mark=diamond*,               mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=7*\thisrow{x}+2,y=y,x error= errorx,y error=errory]{Tables/heradis_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{ e^{\pm}p}$ DIS}}

\addplot+[only marks, color=green, mark color=green, mark options={fill=green,draw=green,scale=1.0},                          mark=triangle*,                mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=7*\thisrow{x}+3,y=y,x error= errorx,y error=errory]{Tables/heraphp_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{ e^{\pm}p}$ PHP}}

\addplot+[only marks, color=orange, mark color=orange, mark options={fill=orange,draw=orange,scale=1.0,rotate=180},                      mark=triangle*,               mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=7*\thisrow{x}+4,y=y,x error= errorx,y error=errory]{Tables/lhcb_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{pp}$ LHCb}}

\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(6 ,0.0) (6 ,0.69)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(13,0.0) (13,0.69)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(20,0.0) (20,0.69)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(27,0.0) (27,0.69)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(34,0.0) (34,0.69)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(41,0.0) (41,0.69)};
\end{axis}
\end{tikzpicture}
\renewcommand*{\familydefault}{\oldfamilydefault}
\end{center}
\end{figure}
}






\newcommand{\diaFINALaverageRPg} {
\begin{figure}[!htb]
\begin{center}
\let\oldfamilydefault\familydefault
\renewcommand*{\familydefault}{\sfdefault}
\begin{tikzpicture}
\begin{axis}[width=0.98\textwidth,height=0.7\textwidth,axis line on top,clip=true,
major grid style={color=red},
axis line style = thick,
xmin=26.5,xmax=45.0,
ymin=0.0,ymax=1.55,
xticklabels={$\thismath{D^{*+}}$,$\thismath{D^{*0}}$,$\thismath{D^{*+}_{s}}$,$\thismath{D^+}$,$\thismath{D^0}$,$\thismath{D^{+}_{s}}$,$\thismath{\Lambda_c^{+}}$,$\thismath{S}$,$\thismath{R_{u/d}}$,$\thismath{P^d_{V}}$,$\thismath{\gamma_s}$},
xtick={5.0,16.0,...,131.0},
yticklabels={$\thismath{0}$,$\thismath{0.2}$,$\thismath{0.4}$,$\thismath{0.6}$,$\thismath{0.8}$,$\thismath{1}$,$\thismath{1.2}$,$\thismath{1.4}$,$\thismath{1.6}$},
y tick style={color=black,thick},
x tick style={color=white},
xtick align=outside,
ytick={0.0,0.2,...,1.6},
minor ytick={0.0,0.05,...,1.6},
major tick length=10pt,
minor tick length=5pt,
y tick label style={font=\boldmath\Large,/pgf/number format/fixed},
x tick label style={anchor=base,font=\boldmath\Large,yshift=-0.7cm},clip=true,
legend style={draw=none,at={(axis cs:28.5,1.56)},anchor=south,legend columns=2,font=\boldmath\large,draw opacity=0,legend cell align=left,fill=none}
]

\pgfplotstableread[header=true]{Tables/average_plot_free_sigma_constrain.txt}{\datawhead}
\pgfplotstableread[header=false]{Tables/average_plot_free_sigma_constrain.txt}{\data}
\foreach \j in {9,...,10}
{
\pgfplotstablegetelem{\j}{[index]1}\of\datawhead
\pgfmathsetmacro{\xap}{3.0*\pgfplotsretval+1.0+5.0+4.0}
\pgfplotstablegetelem{\j}{[index]1}\of\datawhead
\pgfmathsetmacro{\xam}{3.0*\pgfplotsretval-2.0+5.0+4.0}
\pgfplotstablegetelem{\j}{[index]2}\of\datawhead
\pgfmathsetmacro{\ya}{\pgfplotsretval}
\pgfplotstablegetelem{\j}{[index]4}\of\datawhead
\pgfmathsetmacro{\yaerr}{\pgfplotsretval}
\pgfmathsetmacro{\yap}{\ya+\yaerr}
\pgfmathsetmacro{\yam}{\ya-\yaerr}
\edef\temp{\noexpand\fill[gray!40!white] (axis cs:\xap,\yap) rectangle (axis cs:\xam,\yam);}
\temp
}


\legend{}
\addlegendimage{gray,fill=gray,mark=pentagon*,mark size=3.4pt,area legend}
\addplot+[forget plot,only marks, color=gray, mark color=gray,  mark options={fill=gray,draw=gray,scale=1.0},                             mark=pentagon*,           mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+5,y=y,x error= errorx,y error=errory]{Tables/average_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf Combination}}



\addplot+[only marks,   color=red, mark color=red, mark options={fill=red,draw=red,scale=1.0},                              mark=*,          mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+0,y=y,x error= errorx,y error=errory]{Tables/ee10_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath B$-factories}}

\addplot+[only marks, color=pink, mark color=pink, mark options={fill=pink,draw=pink,scale=1.0},                            mark=square*, mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+1,y=y,x error= errorx,y error=errory]{Tables/eez0_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{  Z}$ decays}}

\addplot+[only marks, color=blue, mark color=blue, mark options={fill=blue,draw=blue,scale=1.0},                             mark=diamond*,               mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+2,y=y,x error= errorx,y error=errory]{Tables/heradis_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{ e^{\pm}p}$ DIS}}

\addplot+[only marks, color=green, mark color=green, mark options={fill=green,draw=green,scale=1.0},                         mark=triangle*,                mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+3,y=y,x error= errorx,y error=errory]{Tables/heraphp_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{ e^{\pm}p}$ PHP}}

\addplot+[only marks, color=orange, mark color=orange, mark options={fill=orange,draw=orange,scale=1.0,rotate=180},                     mark=triangle*,               mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+4,y=y,x error= errorx,y error=errory]{Tables/lhcb_plot_free_sigma_constrain.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{pp}$ LHCb}}





\addplot+[only marks,  color=blue,    mark color=blue, mark options={solid,line width=1pt,fill=white,draw=blue,scale=1.0},              mark=*,               mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+6,y=y,x error=errorx,y error plus=erroryp,y error minus=errorym]{ConstantTables/pp_ALICE_7TeV.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{pp}$ ALICE}}

\addplot+[only marks, color=green,   mark color=green, mark options={solid,line width=1pt,fill=white,draw=green,scale=1.0},           mark=square*,                mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+7,y=y,x error= errorx,y error plus=erroryp,y error minus=errorym]{ConstantTables/pp_ATLAS_7TeV.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{pp}$ ATLAS}}

\addplot+[only marks, color=orange,   mark color=orange,  mark options={solid,line width=1pt,fill=white,draw=orange,scale=1.0},   mark=triangle*,            mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+8,y=y,x error= errorx,y error plus=erroryp,y error minus=errorym]{ConstantTables/pp_CDF_2TeV.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{p\bar{p}}$ CDF}}
\addplot+[only marks, color=gray, mark color=gray, mark options={solid,line width=1pt,fill=white,draw=gray,scale=1.0},           mark=diamond*,               mark size=3.4pt,error bars/.cd,y dir=both,y explicit,error bar style={line width=2.5pt,solid},error mark=none] table[x expr=3*\thisrow{x}+9,y=y,x error= errorx,y error plus=erroryp,y error minus=errorym]{ConstantTables/av_David.txt}  ;
\addlegendentry[align=left]{{\bf $\thismath{P^d_{V}}$ average A.~David}}


\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(101,0.0) (101,1.55)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(109,0.0) (109,1.55)};
\addplot [const plot,draw=black,dash pattern=on 16pt off 4pt,thick] coordinates {(117,0.0) (117,1.55)};
\end{axis}
\end{tikzpicture}
\renewcommand*{\familydefault}{\oldfamilydefault}
\end{center}
\end{figure}
}

\begin{document}
\diaFINALaverageFF
\diaFINALaverageRPg
\end{document}

